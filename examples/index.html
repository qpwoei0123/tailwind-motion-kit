<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>tailwind-motion-kit preview</title>
    <link rel="stylesheet" href="./output.css" />
  </head>
  <body class="min-h-screen bg-zinc-950 text-zinc-100">
    <main class="mx-auto max-w-6xl px-6 py-10">
      <header class="mb-8">
        <p class="mb-2 inline-flex items-center gap-2 rounded-full border border-zinc-700 bg-zinc-900 px-3 py-1 text-xs text-zinc-300">
          v0.0.1 · Preview Playground
        </p>
        <h1 class="text-3xl font-bold tracking-tight sm:text-4xl">tailwind-motion-kit</h1>
        <p class="mt-3 max-w-2xl text-zinc-300">
          tailwind-animations.com 스타일을 참고한 프리뷰 페이지. duration / easing을 바꿔가며
          fade, slide, scale, attention, rotate 프리셋을 즉시 확인할 수 있습니다.
          카드 우측 상단 Copy 버튼으로 클래스명을 바로 복사할 수 있습니다.
        </p>
      </header>

      <section class="tmk-panel mb-8 grid gap-3 p-3 lg:grid-cols-12">
        <label class="text-sm lg:col-span-4">
          <span class="mb-2 block text-zinc-400">Duration (ms)</span>
          <input id="duration" type="range" min="150" max="1600" step="50" value="600" class="w-full" />
          <span id="durationValue" class="mt-1 block text-xs text-zinc-300">600ms</span>
        </label>

        <label class="text-sm lg:col-span-4">
          <span class="mb-2 block text-zinc-400">Easing</span>
          <select id="easing" class="tmk-input w-full text-sm">
            <option value="ease">ease</option>
            <option value="linear">linear</option>
            <option value="ease-in">ease-in</option>
            <option value="ease-out">ease-out</option>
            <option value="ease-in-out">ease-in-out</option>
            <option value="cubic-bezier(0.22, 1, 0.36, 1)" selected>smooth (default)</option>
          </select>
          <div class="tmk-subpanel mt-2 p-2">
            <svg id="easingGraph" viewBox="0 0 100 100" class="h-14 w-full">
              <line x1="0" y1="100" x2="100" y2="0" stroke="rgb(63 63 70)" stroke-width="1" stroke-dasharray="3 3"></line>
              <path id="easingPath" d="M0 100 C 22 0, 36 0, 100 0" fill="none" stroke="rgb(99 102 241)" stroke-width="2" stroke-linecap="round"></path>
            </svg>
            <p id="easingMeta" class="mt-1 text-[11px] text-zinc-400">curve: cubic-bezier(0.22, 1, 0.36, 1)</p>
          </div>
        </label>

        <div class="flex flex-col justify-end gap-2 lg:col-span-4">
          <button id="replayAll" class="tmk-btn w-full text-sm font-medium">
            Replay all
          </button>
          <label class="tmk-subpanel flex items-center justify-between px-3 py-2 text-xs text-zinc-300">
            <span>Auto replay</span>
            <button id="autoReplaySwitch" type="button" role="switch" aria-checked="false" class="tmk-switch" aria-label="auto replay toggle">
              <span class="tmk-switch-thumb"></span>
            </button>
            <input id="autoReplay" type="checkbox" class="sr-only" />
          </label>
        </div>
      </section>

      <section>
        <div class="mb-3 flex items-center justify-between">
          <h2 class="text-xl font-semibold">Animation Collection</h2>
          <div class="motion-chip">10 presets</div>
        </div>

        <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
          <article class="motion-card" data-card>
            <div class="mb-3 flex items-center justify-between">
              <h3 class="font-medium">fade-in</h3>
              <span class="motion-chip">fade</span>
            </div>
            <div class="preview animate-fade-in rounded-xl bg-zinc-800 p-6 text-center">Fade In</div>
          </article>

          <article class="motion-card" data-card>
            <div class="mb-3 flex items-center justify-between">
              <h3 class="font-medium">fade-out</h3>
              <span class="motion-chip">fade</span>
            </div>
            <div class="preview animate-fade-out rounded-xl bg-zinc-800 p-6 text-center">Fade Out</div>
          </article>

          <article class="motion-card" data-card>
            <div class="mb-3 flex items-center justify-between">
              <h3 class="font-medium">slide-in-up</h3>
              <span class="motion-chip">slide</span>
            </div>
            <div class="preview animate-slide-in-up rounded-xl bg-zinc-800 p-6 text-center">Slide In Up</div>
          </article>

          <article class="motion-card" data-card>
            <div class="mb-3 flex items-center justify-between">
              <h3 class="font-medium">slide-out-down</h3>
              <span class="motion-chip">slide</span>
            </div>
            <div class="preview animate-slide-out-down rounded-xl bg-zinc-800 p-6 text-center">Slide Out Down</div>
          </article>

          <article class="motion-card" data-card>
            <div class="mb-3 flex items-center justify-between">
              <h3 class="font-medium">scale-in</h3>
              <span class="motion-chip">scale</span>
            </div>
            <div class="preview animate-scale-in rounded-xl bg-zinc-800 p-6 text-center">Scale In</div>
          </article>

          <article class="motion-card" data-card>
            <div class="mb-3 flex items-center justify-between">
              <h3 class="font-medium">scale-out</h3>
              <span class="motion-chip">scale</span>
            </div>
            <div class="preview animate-scale-out rounded-xl bg-zinc-800 p-6 text-center">Scale Out</div>
          </article>

          <article class="motion-card" data-card>
            <div class="mb-3 flex items-center justify-between">
              <h3 class="font-medium">bounce-in</h3>
              <span class="motion-chip">attention</span>
            </div>
            <div class="preview animate-bounce-in rounded-xl bg-zinc-800 p-6 text-center">Bounce In</div>
          </article>

          <article class="motion-card" data-card>
            <div class="mb-3 flex items-center justify-between">
              <h3 class="font-medium">wobble</h3>
              <span class="motion-chip">attention</span>
            </div>
            <div class="preview animate-wobble rounded-xl bg-zinc-800 p-6 text-center">Wobble</div>
          </article>

          <article class="motion-card" data-card>
            <div class="mb-3 flex items-center justify-between">
              <h3 class="font-medium">jelly</h3>
              <span class="motion-chip">attention</span>
            </div>
            <div class="preview animate-jelly rounded-xl bg-zinc-800 p-6 text-center">Jelly</div>
          </article>

          <article class="motion-card" data-card>
            <div class="mb-3 flex items-center justify-between">
              <h3 class="font-medium">rotate-in</h3>
              <span class="motion-chip">rotate</span>
            </div>
            <div class="preview animate-rotate-in rounded-xl bg-zinc-800 p-6 text-center">Rotate In</div>
          </article>
        </div>
      </section>
    </main>

    <div id="toast" class="pointer-events-none fixed bottom-6 left-1/2 z-50 -translate-x-1/2 rounded-lg border border-zinc-700 bg-zinc-900 px-3 py-2 text-xs text-zinc-100 opacity-0 transition-opacity duration-200">
      복사됨
    </div>

    <script>
      const root = document.documentElement;
      const durationInput = document.getElementById('duration');
      const durationValue = document.getElementById('durationValue');
      const easingInput = document.getElementById('easing');
      const replayButton = document.getElementById('replayAll');
      const autoReplayInput = document.getElementById('autoReplay');
      const autoReplaySwitch = document.getElementById('autoReplaySwitch');
      const easingPath = document.getElementById('easingPath');
      const easingMeta = document.getElementById('easingMeta');
      const toast = document.getElementById('toast');
      let toastTimer;
      let autoReplayTimer;

      const showToast = (text) => {
        toast.textContent = text;
        toast.classList.remove('opacity-0');
        toast.classList.add('opacity-100');
        clearTimeout(toastTimer);
        toastTimer = setTimeout(() => {
          toast.classList.remove('opacity-100');
          toast.classList.add('opacity-0');
        }, 1000);
      };

      const syncControls = () => {
        const duration = `${durationInput.value}ms`;
        root.style.setProperty('--tmk-duration', duration);
        root.style.setProperty('--tmk-easing', easingInput.value);
        durationValue.textContent = duration;
        drawEasingGraph();
      };

      const easingMap = {
        ease: [0.25, 0.1, 0.25, 1],
        linear: [0, 0, 1, 1],
        'ease-in': [0.42, 0, 1, 1],
        'ease-out': [0, 0, 0.58, 1],
        'ease-in-out': [0.42, 0, 0.58, 1],
      };

      const parseBezier = (value) => {
        if (easingMap[value]) return easingMap[value];
        const matched = value.match(/cubic-bezier\(([^)]+)\)/);
        if (!matched) return easingMap.ease;
        const nums = matched[1].split(',').map((v) => Number(v.trim()));
        if (nums.length !== 4 || nums.some((n) => Number.isNaN(n))) return easingMap.ease;
        return nums;
      };

      const drawEasingGraph = () => {
        const [x1, y1, x2, y2] = parseBezier(easingInput.value);
        const d = `M0 100 C ${x1 * 100} ${100 - y1 * 100}, ${x2 * 100} ${100 - y2 * 100}, 100 0`;
        easingPath.setAttribute('d', d);
        easingMeta.textContent = `curve: ${easingInput.value}`;
      };

      const replayAll = () => {
        document.querySelectorAll('.preview').forEach((el) => {
          const cls = [...el.classList].find((c) => c.startsWith('animate-'));
          if (!cls) return;
          el.classList.remove(cls);
          void el.offsetWidth;
          el.classList.add(cls);
        });
      };

      const startAutoReplay = () => {
        clearInterval(autoReplayTimer);
        const interval = Math.max(500, Number(durationInput.value) + 250);
        autoReplayTimer = setInterval(replayAll, interval);
      };

      const syncAutoReplayUI = () => {
        const on = autoReplayInput.checked;
        autoReplaySwitch.setAttribute('aria-checked', on ? 'true' : 'false');
        autoReplaySwitch.classList.toggle('is-on', on);
      };

      const syncAutoReplay = () => {
        if (autoReplayInput.checked) {
          startAutoReplay();
          syncAutoReplayUI();
          return;
        }
        clearInterval(autoReplayTimer);
        syncAutoReplayUI();
      };

      const setupCopyButtons = () => {
        document.querySelectorAll('[data-card]').forEach((card) => {
          const preview = card.querySelector('.preview');
          const row = card.querySelector('.mb-3');
          const animClass = [...preview.classList].find((c) => c.startsWith('animate-'));
          if (!animClass || row.querySelector('.copy-btn')) return;

          const btn = document.createElement('button');
          btn.className = 'copy-btn';
          btn.type = 'button';
          btn.textContent = 'Copy';
          btn.addEventListener('click', async () => {
            await navigator.clipboard.writeText(animClass);
            showToast(`${animClass} 복사됨`);
          });
          row.appendChild(btn);
        });
      };

      durationInput.addEventListener('input', () => {
        syncControls();
        replayAll();
        syncAutoReplay();
      });

      easingInput.addEventListener('change', () => {
        syncControls();
        replayAll();
      });

      replayButton.addEventListener('click', replayAll);
      autoReplaySwitch.addEventListener('click', () => {
        autoReplayInput.checked = !autoReplayInput.checked;
        syncAutoReplay();
      });

      setupCopyButtons();
      syncControls();
      syncAutoReplay();
    </script>
  </body>
</html>
